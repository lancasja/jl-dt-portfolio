---
import works from "@/collections/works.json";
import WorkCard from "@/components/cards/WorkCard.astro";

interface Props {
  limit?: number; // Limit the number of displayed projects
}

interface Work {
  name: string;
  slug?: string;
  description?: string;
  image: string;
  url?: string;
  tags?: string[];
  video?: string;
  isShow?: boolean;
}

const { limit } = Astro.props;

// Get project list
let allWorks = works as Work[];

// If limit is specified, use limit
if (limit !== undefined) {
  allWorks = works.slice(0, limit) as Work[];
}
---

<section class="py-8 md:py-8">
  <div class="space-y-8 md:space-y-10">
    <!-- All projects are displayed in full width -->
    {allWorks
      .filter(work => work.isShow !== false)
      .map((work, index) => (
        <WorkCard
          name={work.name}
          slug={work.slug}
          description={work.description}
          image={work.image}
          url={work.url}
          tags={work.tags}
          video={work.video}
          isShow={work.isShow}
          layout="featured"
          index={index}
        />
      ))}
  </div>
</section>

