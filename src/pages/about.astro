---
import experiences from "@/collections/experiences.json";
import social from "@/collections/social.json";
import AboutExperience from "@/components/elements/AboutExperience.astro";
import Button from "@/components/ui/Button.astro";
import Matter from "@/components/ui/Matter.astro";
import Toc from "@/components/widgets/Toc.astro";
import { siteConfig } from "@/config/site.js";
import Layout from "@/layouts/Layout.astro";
import {
	ArrowUpRight,
	AudioLines,
	Code,
	Globe,
	Mail,
	Monitor,
	Music,
	Palette,
	Smartphone,
	Ticket,
	Zap,
} from "@lucide/astro";

// Manually define page table of contents structure
const headings = [
	{ depth: 2, slug: "about-me", text: "About Me" },
	{ depth: 2, slug: "expertise", text: "Skills" },
	{ depth: 2, slug: "experience", text: "Experience" },
	{ depth: 2, slug: "lets-connect", text: "Let's Connect" },
];

const filtered = headings.filter((h) => h.depth <= 3);
---

<Layout title="About Me">
  <!-- Mobile TOC -->
  <div class="block lg:hidden px-7 pt-6">
    <Toc headings={filtered} />
  </div>

  <!-- Main container -->
  <div class="relative site-container mx-auto my-8">
    <div class="flex flex-col lg:flex-row gap-8 lg:gap-12 xl:gap-16">
      <!-- Left TOC - Fixed on desktop -->
      <aside class="relative hidden lg:block lg:w-40 xl:w-50 flex-shrink-0">
        <div class="toc-sticky-wrapper">
          <Toc headings={filtered} />
        </div>
      </aside>

      <!-- Right main content - Adaptive width -->
      <main class="relative flex-1 min-w-0 w-full lg:max-w-none">
        <div
          class="w-full"
          data-aos="fade-up-xs"
          data-aos-duration="500"
          data-aos-once="true"
        >
          <h2
            id="about-me"
            class="text-2xl font-brand tracking-tight sm:text-3xl lg:text-4xl"
          >
            About Me
          </h2>
          <div
            class="w-full border-b-1 border-dashed border-b-gray-200 dark:border-b-neutral-700 mt-4 mb-8"
          >
          </div>
        </div>

        <div
          class="flex items-center gap-3 mb-6"
          data-aos="fade-up-xs"
          data-aos-delay="100"
          data-aos-duration="500"
          data-aos-once="true"
        >
          <div class="flex items-center gap-3">
            <a
              href="https:/jaml.studio"
              target="_blank"
              class="font-brand text-[24px] text-neutral-700 dark:text-neutral-100"
              >Jonathan Lancaster</a
            >
          </div>
        </div>

        <div
          class="social"
          data-aos="fade-up-xs"
          data-aos-delay="300"
          data-aos-duration="600"
          data-aos-once="true"
        >
          <div
            class="social-list flex flex-wrap gap-2 items-center justify-start mt-6 mb-8"
          >
            {
              social
                .filter((item) => item.isShow !== false)
                .map((item, index) => (
                  <a
                    href={item.url}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="social-item relative group overflow-hidden rounded-xl transition-all duration-300 hover:-translate-y-2 hover:rotate-[-6deg] hover:shadow-lg"
                    data-aos="fade-up-xs"
                    data-aos-delay={400 + index * 50}
                    data-aos-duration="400"
                    data-aos-once="true"
                  >
                    <img
                      src={item.image}
                      alt={item.name}
                      class="w-[96px] h-[96px] rounded-xl object-cover transition-transform duration-300 group-hover:scale-105"
                    />
                    <div class="absolute bottom-[10px] left-[12px] z-10">
                      <div class="social-name font-semibold text-[10px] text-white drop-shadow-md">
                        {item.name}
                      </div>
                      <div class="social-username text-[9px] text-white/85 drop-shadow-sm">
                        <span
                          style={`visibility: ${item.username === "" ? "hidden" : "visible"};`}
                        >
                          @
                        </span>
                        {item.username}
                      </div>
                    </div>
                  </a>
                ))
            }
          </div>
        </div>

        <div
          class="w-full border-b-1 border-dashed border-b-gray-200 dark:border-b-neutral-700 mt-4 mb-8"
        >
        </div>

        <p
          class="text-xl font-medium text-left text-neutral-800 dark:text-neutral-100"
          data-aos="fade-up-xs"
          data-aos-delay="100"
          data-aos-duration="500"
          data-aos-once="true"
        >
          I'm a Creative Technologist and Musician.
        </p>
        <p
          class="text-neutral-700 pb-4 pt-4 leading-[1.8] dark:text-neutral-200"
          data-aos="fade-up-xs"
          data-aos-delay="200"
          data-aos-duration="500"
          data-aos-once="true"
        >
          I build at the intersection of design, technology, and art, turning
          ideas into working projects. Designing and building sites and apps,
          building creative tools, producing music, and running events, anywhere
          technology can enhance an experience.
        </p>

        <p
          class="text-neutral-700 pb-4 pt-4 leading-[1.8] dark:text-neutral-200"
          data-aos="fade-up-xs"
          data-aos-delay="200"
          data-aos-duration="500"
          data-aos-once="true"
        >
          I advocate for privacy, security, and digital literacy, favor open
          source tools, and stay active as a musician and producer.
        </p>

        <div
          class="mt-8 mb-16 flex item-center justify-start gap-3"
          data-aos="fade-up-xs"
          data-aos-delay="400"
          data-aos-duration="500"
          data-aos-once="true"
        >
          <Button url="mailto:jaml17@proton.me">
            <Mail size={16} /> jaml17@proton.me
          </Button>
        </div>

        <div
          class="w-full border-b-1 border-dashed border-b-neutral-200 dark:border-b-neutral-700 mt-4 mb-8"
        >
        </div>
        <section>
          <h2
            id="expertise"
            class="mt-8 mb-2 text-[28px] text-neutral-800 dark:text-neutral-200 font-brand"
            data-aos="fade-up-xs"
            data-aos-duration="500"
            data-aos-once="true"
          >
            Skills
          </h2>
          <div
            class="list flex flex-wrap gap-3 mt-4 mb-12 w-full items-center justify-start"
            data-aos="fade-up-xs"
            data-aos-delay="100"
            data-aos-duration="600"
            data-aos-once="true"
          >
            <!-- Product Design -->
            <div
              class="item flex justify-start items-start flex-grow-0 flex-shrink-0 overflow-hidden gap-2 px-5 py-4 rounded-xl bg-gradient-to-b from-[f7f8f0] to-[#f1f2f9] dark:from-gray-900 dark:to-gray-800 dark:text-neutral-200"
            >
              <div
                class="flex justify-center items-center flex-grow-0 flex-shrink-0 gap-2"
              >
                <Palette size={22} />
                <div
                  class="flex-grow-0 flex-shrink-0 text-base font-medium text-left text-neutral-700 dark:text-neutral-200"
                >
                  Product Design
                </div>
              </div>
            </div>
            <!-- Website Design -->
            <div
              class="item flex justify-start items-start flex-grow-0 flex-shrink-0 overflow-hidden gap-2 px-5 py-4 rounded-xl bg-gradient-to-b from-[f7f8f0] to-[#f1f2f9] dark:from-gray-900 dark:to-gray-800"
            >
              <div
                class="flex justify-center items-center flex-grow-0 flex-shrink-0 gap-2"
              >
                <Globe size={22} />
                <div
                  class="flex-grow-0 flex-shrink-0 text-base font-medium text-left text-neutral-700 dark:text-neutral-200"
                >
                  Websites & Apps
                </div>
              </div>
            </div>
            <!-- Brand Design -->
            <div
              class="item flex justify-start items-start flex-grow-0 flex-shrink-0 overflow-hidden gap-2 px-5 py-4 rounded-xl bg-gradient-to-b from-[f7f8f0] to-[#f1f2f9] dark:from-gray-900 dark:to-gray-800"
            >
              <div
                class="flex justify-center items-center flex-grow-0 flex-shrink-0 gap-2"
              >
                <Zap size={22} />
                <div
                  class="flex-grow-0 flex-shrink-0 text-base font-medium text-left text-neutral-700 dark:text-neutral-200"
                >
                  Design Systems
                </div>
              </div>
            </div>
            <!-- Prototyping -->
            <div
              class="item flex justify-start items-start flex-grow-0 flex-shrink-0 overflow-hidden gap-2 px-5 py-4 rounded-xl bg-gradient-to-b from-[f7f8f0] to-[#f1f2f9] dark:from-gray-900 dark:to-gray-800"
            >
              <div
                class="flex justify-center items-center flex-grow-0 flex-shrink-0 gap-2"
              >
                <Monitor size={22} />
                <div
                  class="flex-grow-0 flex-shrink-0 text-base font-medium text-left text-neutral-700 dark:text-neutral-200"
                >
                  Prototyping
                </div>
              </div>
            </div>
            <!-- Development -->
            <div
              class="item flex justify-start items-start flex-grow-0 flex-shrink-0 overflow-hidden gap-2 px-5 py-4 rounded-xl bg-gradient-to-b from-[f7f8f0] to-[#f1f2f9] dark:from-gray-900 dark:to-gray-800"
            >
              <div
                class="flex justify-center items-center flex-grow-0 flex-shrink-0 gap-2"
              >
                <Code size={22} />
                <div
                  class="flex-grow-0 flex-shrink-0 text-base font-medium text-left text-neutral-700 dark:text-neutral-200"
                >
                  Development
                </div>
              </div>
            </div>
            <!-- Creative Technology -->
            <div
              class="item flex justify-start items-start flex-grow-0 flex-shrink-0 overflow-hidden gap-2 px-5 py-4 rounded-xl bg-gradient-to-b from-[f7f8f0] to-[#f1f2f9] dark:from-gray-900 dark:to-gray-800"
            >
              <div
                class="flex justify-center items-center flex-grow-0 flex-shrink-0 gap-2"
              >
                <Smartphone size={22} />
                <div
                  class="flex-grow-0 flex-shrink-0 text-base font-medium text-left text-neutral-700 dark:text-neutral-200"
                >
                  Creative Technology
                </div>
              </div>
            </div>

            <!-- Music Production -->
            <div
              class="item flex justify-start items-start flex-grow-0 flex-shrink-0 overflow-hidden gap-2 px-5 py-4 rounded-xl bg-gradient-to-b from-[f7f8f0] to-[#f1f2f9] dark:from-gray-900 dark:to-gray-800 dark:text-neutral-200"
            >
              <div
                class="flex justify-center items-center flex-grow-0 flex-shrink-0 gap-2"
              >
                <Music size={22} />
                <div
                  class="flex-grow-0 flex-shrink-0 text-base font-medium text-left text-neutral-700 dark:text-neutral-200"
                >
                  Music Production
                </div>
              </div>
            </div>

            <!-- Audio Engineering -->
            <div
              class="item flex justify-start items-start flex-grow-0 flex-shrink-0 overflow-hidden gap-2 px-5 py-4 rounded-xl bg-gradient-to-b from-[f7f8f0] to-[#f1f2f9] dark:from-gray-900 dark:to-gray-800 dark:text-neutral-200"
            >
              <div
                class="flex justify-center items-center flex-grow-0 flex-shrink-0 gap-2"
              >
                <AudioLines size={22} />
                <div
                  class="flex-grow-0 flex-shrink-0 text-base font-medium text-left text-neutral-700 dark:text-neutral-200"
                >
                  Audio Engineering
                </div>
              </div>
            </div>

            <!-- Event Production -->
            <div
              class="item flex justify-start items-start flex-grow-0 flex-shrink-0 overflow-hidden gap-2 px-5 py-4 rounded-xl bg-gradient-to-b from-[f7f8f0] to-[#f1f2f9] dark:from-gray-900 dark:to-gray-800 dark:text-neutral-200"
            >
              <div
                class="flex justify-center items-center flex-grow-0 flex-shrink-0 gap-2"
              >
                <Ticket size={22} />
                <div
                  class="flex-grow-0 flex-shrink-0 text-base font-medium text-left text-neutral-700 dark:text-neutral-200"
                >
                  Event Production
                </div>
              </div>
            </div>
          </div>
        </section>

        <div
          class="w-full border-b-1 border-dashed border-b-gray-200 dark:border-b-neutral-700 mt-4 mb-8"
        >
        </div>

        <section class="experience">
          <h2
            id="experience"
            class="mt-12 mb-4 text-[28px] text-neutral-800 dark:text-neutral-200 font-brand"
            data-aos="fade-up-xs"
            data-aos-duration="500"
            data-aos-once="true"
          >
            Professional Experience
          </h2>
          <div
            class="px-5 py-10"
            data-aos="fade-up-xs"
            data-aos-delay="100"
            data-aos-duration="600"
            data-aos-once="true"
          >
            {
              experiences.map((experience, index) => {
                return (
                  !experience.related && (
                    <div
                      class="pb-10 border-l border-dashed border-gray-200 last:border-l-0 dark:border-neutral-500"
                      data-aos="fade-up-xs"
                      data-aos-delay={200 + index * 100}
                      data-aos-duration="500"
                      data-aos-once="true"
                    >
                      <AboutExperience
                        dates={experience.dates}
                        role={experience.role}
                        company={experience.company}
                        description={experience.description}
                        logo={experience.logo}
                      />
                    </div>
                  )
                );
              })
            }
          </div>
        </section>

        <!-- OTHER EXPERIENCES -->
        <!-- <section class="experience">
          <h2
            id="other-experience"
            class="mt-12 mb-4 text-[28px] text-neutral-800 dark:text-neutral-200 font-brand"
            data-aos="fade-up-xs"
            data-aos-duration="500"
            data-aos-once="true"
          >
            Other Experience
          </h2>
          <div
            class="px-5 py-10"
            data-aos="fade-up-xs"
            data-aos-delay="100"
            data-aos-duration="600"
            data-aos-once="true"
          >
            {
              experiences.map((experience, index) => {
                return ( experience.related &&
                  <div
                    class="pb-10 border-l border-dashed border-gray-200 last:border-l-0 dark:border-neutral-500"
                    data-aos="fade-up-xs"
                    data-aos-delay={200 + index * 100}
                    data-aos-duration="500"
                    data-aos-once="true"
                  >
                    <AboutExperience
                      dates={experience.dates}
                      role={experience.role}
                      company={experience.company}
                      description={experience.description}
                      logo={experience.logo}
                    />
                  </div>
                );
              })
            }
          </div>
        </section> -->
        <div
          class="w-full border-b-1 border-dashed border-b-gray-200 dark:border-b-neutral-700 mt-4 mb-8"
        >
        </div>
        <section>
          <h2
            id="lets-connect"
            class="mt-12 mb-4 text-[28px] text-neutral-800 dark:text-neutral-200 font-brand"
            data-aos="fade-up-xs"
            data-aos-duration="500"
            data-aos-once="true"
          >
            Let's Connect
          </h2>
          <p
            class="text-sm leading-6 text-neutral-700 dark:text-neutral-300"
            data-aos="fade-up-xs"
            data-aos-delay="100"
            data-aos-duration="500"
            data-aos-once="true"
          >
            If you want to collaborate, need consultation, or want to drop a
            line, send me an <a href="mailto:jaml17@proton.me" class="underline"
              >email
            </a> and I'll get back to you. I'm open to contracts and projects of all
            sizes.
          </p>
        </section>
      </main>
    </div>
  </div>
</Layout>

<style>
  .toc-sticky-wrapper {
    position: sticky;
    top: 8rem;
  }
</style>
